
record(bo, "test:ml:emit:user_ctrl"){
    field(DESC, "User Ctrl")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(VAL, "0")
    field(PINI,"YES")
    field(TPRO, "1")
 }

record(stringout, "test:ml:emit:yaml"){
    field(DESC, "Name of the programs yaml file")
    field(VAL,  "auto_emit_diag0.yaml")
}

record(sub, "test:ml:emit:readiness_checks"){
    field(INAM, "subChecksInit")
    field(SNAM, "subChecksProcess") #python module, or c subroutine should check with both cases
    field(INPA, "test:ml:emit:user_ctrl CP")
    field(VAL, "0")
}

record(calcout, "test:ml:emit:ready"){
    field(SCAN, "2 second")
    field(INPA, "test:ml:emit:user_ctrl")
    field(INPB, "test:ml:emit:readiness_checks")
    field(INPC, "1")
    field(INPD, "1")
    field(INPE, "1")
    field(CALC, "A=1&&B=1&&C=1&&D=1&&E=1&&F=1?1:0" )
    field(OOPT, "When Non-zero")
    field(OUT,"test:ml:emit:program_start PP")
}

record(ao,"test:ml:emit:program_start"){
    field(DESC, "Start of program")
    field(VAL, "0")
    field(FLNK, "test:ml:emit:program")
    field(TPRO, "1")
}

record(longin, "test:ml:emit:program"){
    field(DTYP, "Python Device")
    field(INP, "@ml_emittance_scan_runner DIAG0 QDG006 OTRDG02")
    info("program_yaml", "test.yaml")
}

#record(aSub, "emittance_serialize")
#{
  #field(INPA, "stuff we care about")
  #field(SNAM,"emittance_serializer")
  #field(OUTA, "serialized_model")
#}
  # hard code values for test purposes decide where we want field(DTYP, "Python) (pydevsup) or field(DTYP)
#record(record(calc, "ML:$(B):STATSUMY") {
    #field(DESC, "Stats summary for $(B) readiness")
    #field(INPA, "$(MPS)")
    #field(INPB, "$(RATE)")
    #field(INPC, "$(MPS_FLAG)")
    #field(INPF, "$(RATE_FLAG)")
    #field(INPG, "ML:USER:READY")
    #field(CALC, "A=B&&A=D&&B=E&&C=F?1:0")
#}) 
#record(longin, "test:ml:emit") {
    #field(DTYP, "Python Device")
    #field(INP , "@ml_emittance_scan_runner @emittance_serialize:serialized_model") #can only be 256 characters... idk if this is the method we want to take
    #maybe should pass a list of args to reduce characters.... then the list is used to instantiate all classes needed for emittance....
  #}

    #field(INPC, "SIOC:SYS0:MP00:SC_DIAG0_BC") #TODO: convert to $(MPS), will force the field to be a value that allows for the record to proc
    #field(INPD, "PS:DIAG0:1:TRIGSTATE") # will force the field to be a value that allows for the record to proc
    #field(INPE, "TPG:SYS0:1:DST01:RATE_RBV") #will force the field to be a value that allows for it proc