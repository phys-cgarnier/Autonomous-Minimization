#broken links dbcar(*,1)
record(bo, "ML:DIAG0:AUTO:PROG_CTRL"){
    field(DESC, "User Ctrl")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(VAL, "0")
    field(PINI,"YES")
    field(FLNK, "ML:DIAG0:AUTO:MASK" )

 }

 record(bo, "ML:DIAG0:AUTO:PROG_CTRL2"){
    field(DESC, "User Ctrl2")
    field(ZNAM, "OFF")
    field(ONAM, "ON")
    field(VAL, "0")
    field(PINI,"YES")
    field(FLNK, "ML:DIAG0:AUTO:MASK" )
 }

record(stringout, "ML:DIAG0:AUTO:HOME_DIR"){
    field(VAL, "/sdf/home/c/cgarnier/autonomous_diag0/")
}
record(stringout, "ML:DIAG0:AUTO:PROG_FILE"){
    field(VAL, "Autonomous-Minimization/tests/test_A.py")
}

record(stringout, "ML:DIAG0:AUTO:PROG_FILE2"){
    field(VAL, "Autonomous-Minimization/tests/test_B.py")
}

record(waveform, "ML:DIAG0:AUTO:WVFM") {
    field(DESC, "description")
    field(NELM, "256")
    field(FTVL, "CHAR")
}

record(stringout, "ML:DIAG0:AUTO:DUMP_FOLDER"){
    field(VAL,  "path/to/folder")
}

record(longin, "ML:DIAG0:AUTO:PROG"){
    field(DTYP, "Python Device")
    field(INP, "@autonomous_program_support {'ctrl' : 'ML:DIAG0:AUTO:PROG_CTRL', 'prog_file': 'ML:DIAG0:AUTO:PROG_FILE', 'home_dir': 'ML:DIAG0:AUTO:HOME_DIR'}")
}


record(longin, "ML:DIAG0:AUTO:PROG2"){
    field(DTYP, "Python Device")
    field(INP, "@autonomous_program_support {'ctrl' : 'ML:DIAG0:AUTO:PROG_CTRL2', 'prog_file': 'ML:DIAG0:AUTO:PROG_FILE2', 'home_dir': 'ML:DIAG0:AUTO:HOME_DIR'}")
}
#{'ctrl_pv' : 'ML:DIAG0:AUTO:PROG_CTRL2', prog_file': 'ML:DIAG0:AUTO:PROG_FILE2'}



record(calcout, "ML:DIAG0:AUTO:MASK") {
    field(DESC, "description")
    field(CALC, "A=1&B=1?3:B?2:A?1:0")
    field(INPA, "ML:DIAG0:AUTO:PROG_CTRL")
    field(INPB, "ML:DIAG0:AUTO:PROG_CTRL2")
    field(OUT,  "ML:DIAG0:AUTO:PROG_SELECT.SELN")
    field(OOPT, "Every Time")
}

record(seq, "ML:DIAG0:AUTO:PROG_SELECT") {
    field(SCAN, "30 second")
    field(DESC, "description")
    field(SELM, "Mask")
    field(SELN, "1")
    field(DOL1, "1")
    field(LNK1, "ML:DIAG0:AUTO:PROG.PROC")
    field(DLY2, "45")
    field(DOL2, "1")
    field(LNK2, "ML:DIAG0:AUTO:PROG2.PROC")
}



